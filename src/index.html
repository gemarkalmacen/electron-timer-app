<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Start your development with a Dashboard for Bootstrap 4.">
  <meta name="author" content="Creative Tim">
  <title>Splace | Time Tacker</title>
  <!-- Favicon -->
  <link rel="icon" href="assets/img/brand/favicon.png" type="image/png">
  <!-- Fonts -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700">
  <!-- Icons -->
  <link rel="stylesheet" href="assets/vendor/nucleo/css/nucleo.css" type="text/css">
  <link rel="stylesheet" href="assets/vendor/@fortawesome/fontawesome-free/css/all.min.css" type="text/css">
  <!-- Page plugins -->
  <!-- Argon CSS -->
  <link rel="stylesheet" href="assets/css/argon.css?v=1.2.0" type="text/css">
  <style>
    body {
      overflow-x: hidden;
    }
    ::-webkit-scrollbar {
    display: none;
    }
  </style>
</head>

<body>
  <!-- Main content -->
  <div id="app">
  <div class="main-content" id="panel">
    <!-- Topnav -->
    <nav class="navbar navbar-top navbar-expand navbar-dark bg-primary border-bottom">
      <div class="container-fluid">
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <!-- Search form -->
          <form class="navbar-search navbar-search-light form-inline mr-sm-3" id="navbar-search-main">
            <div class="form-group mb-0">
              <div class="input-group input-group-alternative input-group-merge">
                <div class="input-group-prepend">
                  <span class="input-group-text"><i class="fas fa-search"></i></span>
                </div>
                <input class="form-control" placeholder="Search" type="text">
              </div>
            </div>
            <button type="button" class="close" data-action="search-close" data-target="#navbar-search-main" aria-label="Close">
              <span aria-hidden="true">Ã—</span>
            </button>
          </form>
          <!-- Navbar links -->
          <ul class="navbar-nav align-items-center  ml-md-auto ">
            <li class="nav-item d-xl-none">
              <a class="nav-link" href="#" data-action="search-show" data-target="#navbar-search-main">
                <i class="ni ni-zoom-split-in"></i>
              </a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="ni ni-bell-55"></i>
              </a>
              <div class="dropdown-menu dropdown-menu-xl  dropdown-menu-right  py-0 overflow-hidden">
                <!-- Dropdown header -->
                <div class="px-3 py-3">
                  <h6 class="text-sm text-muted m-0">You have <strong class="text-primary">13</strong> notifications.</h6>
                </div>
                <!-- List group -->
                <div class="list-group list-group-flush">
                  <a href="#!" class="list-group-item list-group-item-action">
                    <div class="row align-items-center">
                      <div class="col-auto">
                        <!-- Avatar -->
                        <img alt="Image placeholder" src="assets/img/theme/team-1.jpg" class="avatar rounded-circle">
                      </div>
                      <div class="col ml--2">
                        <div class="d-flex justify-content-between align-items-center">
                          <div>
                            <h4 class="mb-0 text-sm">John Snow</h4>
                          </div>
                          <div class="text-right text-muted">
                            <small>2 hrs ago</small>
                          </div>
                        </div>
                        <p class="text-sm mb-0">Let's meet at Starbucks at 11:30. Wdyt?</p>
                      </div>
                    </div>
                  </a>
                  <a href="#!" class="list-group-item list-group-item-action">
                    <div class="row align-items-center">
                      <div class="col-auto">
                        <!-- Avatar -->
                        <img alt="Image placeholder" src="assets/img/theme/team-2.jpg" class="avatar rounded-circle">
                      </div>
                      <div class="col ml--2">
                        <div class="d-flex justify-content-between align-items-center">
                          <div>
                            <h4 class="mb-0 text-sm">John Snow</h4>
                          </div>
                          <div class="text-right text-muted">
                            <small>3 hrs ago</small>
                          </div>
                        </div>
                        <p class="text-sm mb-0">A new issue has been reported for Argon.</p>
                      </div>
                    </div>
                  </a>
                  <a href="#!" class="list-group-item list-group-item-action">
                    <div class="row align-items-center">
                      <div class="col-auto">
                        <!-- Avatar -->
                        <img alt="Image placeholder" src="assets/img/theme/team-3.jpg" class="avatar rounded-circle">
                      </div>
                      <div class="col ml--2">
                        <div class="d-flex justify-content-between align-items-center">
                          <div>
                            <h4 class="mb-0 text-sm">John Snow</h4>
                          </div>
                          <div class="text-right text-muted">
                            <small>5 hrs ago</small>
                          </div>
                        </div>
                        <p class="text-sm mb-0">Your posts have been liked a lot.</p>
                      </div>
                    </div>
                  </a>
                  <a href="#!" class="list-group-item list-group-item-action">
                    <div class="row align-items-center">
                      <div class="col-auto">
                        <!-- Avatar -->
                        <img alt="Image placeholder" src="assets/img/theme/team-4.jpg" class="avatar rounded-circle">
                      </div>
                      <div class="col ml--2">
                        <div class="d-flex justify-content-between align-items-center">
                          <div>
                            <h4 class="mb-0 text-sm">John Snow</h4>
                          </div>
                          <div class="text-right text-muted">
                            <small>2 hrs ago</small>
                          </div>
                        </div>
                        <p class="text-sm mb-0">Let's meet at Starbucks at 11:30. Wdyt?</p>
                      </div>
                    </div>
                  </a>
                  <a href="#!" class="list-group-item list-group-item-action">
                    <div class="row align-items-center">
                      <div class="col-auto">
                        <!-- Avatar -->
                        <img alt="Image placeholder" src="assets/img/theme/team-5.jpg" class="avatar rounded-circle">
                      </div>
                      <div class="col ml--2">
                        <div class="d-flex justify-content-between align-items-center">
                          <div>
                            <h4 class="mb-0 text-sm">John Snow</h4>
                          </div>
                          <div class="text-right text-muted">
                            <small>3 hrs ago</small>
                          </div>
                        </div>
                        <p class="text-sm mb-0">A new issue has been reported for Argon.</p>
                      </div>
                    </div>
                  </a>
                </div>
                <!-- View all -->
                <a href="#!" class="dropdown-item text-center text-primary font-weight-bold py-3">View all</a>
              </div>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="ni ni-ungroup"></i>
              </a>
              <div class="dropdown-menu dropdown-menu-lg dropdown-menu-dark bg-default  dropdown-menu-right ">
                <div class="row shortcuts px-4">
                  <a href="#!" class="col-4 shortcut-item">
                    <span class="shortcut-media avatar rounded-circle bg-gradient-red">
                      <i class="ni ni-calendar-grid-58"></i>
                    </span>
                    <small>Calendar</small>
                  </a>
                  <a href="#!" class="col-4 shortcut-item">
                    <span class="shortcut-media avatar rounded-circle bg-gradient-orange">
                      <i class="ni ni-email-83"></i>
                    </span>
                    <small>Email</small>
                  </a>
                  <a href="#!" class="col-4 shortcut-item">
                    <span class="shortcut-media avatar rounded-circle bg-gradient-info">
                      <i class="ni ni-credit-card"></i>
                    </span>
                    <small>Payments</small>
                  </a>
                  <a href="#!" class="col-4 shortcut-item">
                    <span class="shortcut-media avatar rounded-circle bg-gradient-green">
                      <i class="ni ni-books"></i>
                    </span>
                    <small>Reports</small>
                  </a>
                  <a href="#!" class="col-4 shortcut-item">
                    <span class="shortcut-media avatar rounded-circle bg-gradient-purple">
                      <i class="ni ni-pin-3"></i>
                    </span>
                    <small>Maps</small>
                  </a>
                  <a href="#!" class="col-4 shortcut-item">
                    <span class="shortcut-media avatar rounded-circle bg-gradient-yellow">
                      <i class="ni ni-basket"></i>
                    </span>
                    <small>Shop</small>
                  </a>
                </div>
              </div>
            </li>
          </ul>
          <ul class="navbar-nav align-items-center  ml-auto ml-md-0 ">
            <li class="nav-item dropdown">
              <a class="nav-link pr-0" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <div class="media align-items-center">
                  <span class="avatar avatar-sm rounded-circle">
                    <img alt="Image placeholder" src="assets/img/theme/team-4.jpg">
                  </span>
                  <div class="media-body  ml-2  d-none d-lg-block">
                    <span class="mb-0 text-sm  font-weight-bold">John Snow</span>
                  </div>
                </div>
              </a>
              <div class="dropdown-menu  dropdown-menu-right ">
                <div class="dropdown-header noti-title">
                  <h6 class="text-overflow m-0">Welcome!</h6>
                </div>
                <a href="#!" class="dropdown-item">
                  <i class="ni ni-single-02"></i>
                  <span>My profile</span>
                </a>
                <a href="#!" class="dropdown-item">
                  <i class="ni ni-settings-gear-65"></i>
                  <span>Settings</span>
                </a>
                <a href="#!" class="dropdown-item">
                  <i class="ni ni-calendar-grid-58"></i>
                  <span>Activity</span>
                </a>
                <a href="#!" class="dropdown-item">
                  <i class="ni ni-support-16"></i>
                  <span>Support</span>
                </a>
                <div class="dropdown-divider"></div>
                <a href="login.html" class="dropdown-item">
                  <i class="ni ni-user-run"></i>
                  <span>Logout</span>
                </a>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- Header -->
    <!-- Header -->
    <div class="header bg-primary pb-6">
      <div class="container-fluid">
        <div class="header-body">
          <!-- Card stats -->
          <div class="row">
            <div class="col-xl-3 col-md-6 mt-5">
              <div class="card card-stats">
                <!-- Card body -->
                <div class="card-body">
                  <div class="row">
                    <div class="col">
                      <span class="h1 font-weight-bold mb-0" id="timer">0</span>
                    </div>
                    <div class="col-auto">
                      <a href="#" class="btn btn-sm btn-neutral" v-if="logStatus === 'Check-in'" @click="btnLogCheckIn">Check-in</a>
                      <a href="#" class="btn btn-sm btn-neutral" v-else @click="btnLogCheckOut">Check-out</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-lg-6 col-7 mb-2">
              <h6 class="h2 text-white d-inline-block mb-0">Breaks</h6>
            </div>


            <div class="row">

            <div  class="col-md-12" v-for="breakList in break_list" :key="breakList.id">   
              <div class="col-xl-3 col-md-6"  >
                <div class="card card-stats">
                  <div class="card-body">
                    <div class="row">
                      <div class="col">
                        <h5 class="card-title text-uppercase text-muted mb-0">{{ breakList.name }}</h5>
                        <span class="h1 font-weight-bold mb-0" :id="breakList.id">{{ breakList.break_time }}</span>
                      </div>
                      <div class="col-auto">
                        <div @click="radioBreakPlay(breakList)" class="icon icon-shape bg-gradient-orange text-white rounded-circle shadow">
                          <i class="ni ni-button-play"></i>
                        </div>
                        <div @click="radioBreakPause(breakList)" class="icon icon-shape bg-gradient-orange text-white rounded-circle shadow">
                          <i class="ni ni-button-pause"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          </div>
           

            <!-- <div id="breakContent" class="col-xl-3 col-md-6">

            </div> -->
          
      
            

          </div>
        </div>
      </div>
    </div>
    <!-- Page content -->
   
  </div>
</div>
  <!-- Argon Scripts -->
  <!-- Core -->
  <script src="assets/vendor/jquery/dist/jquery.min.js"></script>
  <script src="assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/js-cookie/js.cookie.js"></script>
  <script src="assets/vendor/jquery.scrollbar/jquery.scrollbar.min.js"></script>
  <script src="assets/vendor/jquery-scroll-lock/dist/jquery-scrollLock.min.js"></script>
  <!-- Argon JS -->
  <script src="assets/js/argon.js?v=1.2.0"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
  <script>


    new Vue({
      el: '#app',
      data: {
        timerVar: null,
        breakTimerVar: null,
        totalSeconds: 0,
        totalSecondsBreak: 0,
        logStatus: 'Check-in',
        timeAllocation: 0,
        break_list: [],
        selectedBreak: null,
        updatedBreakList: []
      },

      created() {
        this.getBreak()
      },

      methods: {
        async getBreak() {
          try {
            const response = await axios.get('http://localhost:8080/breaks');
            this.break_list = response.data

            this.break_list.forEach(breaks => {
              
                // if(breaks) {

                // }

                localStorage.setItem("runningTimeBreak"+breaks.id, 0);


            });
          } catch (error) {
            console.error(error);
          }
        },
        countTimer() {
           ++this.totalSeconds;
           var hour = Math.floor(this.totalSeconds /3600);
           var minute = Math.floor((this.totalSeconds - hour*3600)/60);
           var seconds = this.totalSeconds - (hour*3600 + minute*60);
           if(hour < 10)
             hour = "0"+hour;
           if(minute < 10)
             minute = "0"+minute;
           if(seconds < 10)
             seconds = "0"+seconds;
             localStorage.setItem("runningTime", this.totalSeconds);
             document.getElementById("timer").innerHTML = hour + ":" + minute + ":" + seconds;
        },
        countTimerBreaks() {
             this.totalSecondsBreak = parseInt(localStorage.getItem(`runningTimeBreak${this.selectedBreak.id}`) ?? 0);
           --this.totalSecondsBreak;
           var hour = Math.floor(this.totalSecondsBreak /3600);
           var minute = Math.floor((this.totalSecondsBreak - hour*3600)/60);
           var seconds = this.totalSecondsBreak - (hour*3600 + minute*60);
           if(hour < 10)
             hour = "0"+hour;
           if(minute < 10)
             minute = "0"+minute;
           if(seconds < 10)
             seconds = "0"+seconds;
             

             localStorage.setItem("runningTimeBreak"+this.selectedBreak.id, this.totalSecondsBreak);
             document.getElementById(this.selectedBreak.id).innerHTML = (minute - this.selectedBreak.break_time) + ":" + seconds;
        },
        radioBreakPlay(data) {
          clearInterval(this.timerVar)
          // clearInterval(this.breakTimerVar)
          this.timeAllocation = data.break_time
          this.selectedBreak = data
          this.breakTimerVar = setInterval(this.countTimerBreaks, 1000)
        },
        radioBreakPause(data) {
          // clearInterval(this.timerVar)
          this.timerVar = setInterval(this.countTimer, 1000);
          clearInterval(this.breakTimerVar)
          // this.timeAllocation = data.break_time
          // this.selectedBreak = data
          // this.breakTimerVar = setInterval(this.countTimerBreaks, 1000)
        },
        btnLogCheckIn() {
          clearInterval(this.breakTimerVar)
          this.timerVar = setInterval(this.countTimer, 1000);
          this.totalSeconds = parseInt(localStorage.getItem('runningTime') ?? 0);
          this.logStatus = 'Check-out'
          localStorage.setItem("logStatus", 'Check-out');
          window.$('#btnLogCheckOut').show();
          window.$('#btnLogCheckIn').hide();
        },
        btnLogCheckOut() {
          clearInterval(this.breakTimerVar)
          clearInterval(this.timerVar)
          this.logStatus = 'Check-in'
          localStorage.setItem("logStatus", 'Check-in');
          window.$('#btnLogCheckOut').hide();
          window.$('#btnLogCheckIn').show();
          // clearInterval(this.timerVar)
          localStorage.removeItem("runningTime");
        },
        saveToStorage(key, value) {
            localStorage.setItem(key, JSON.stringify(value))
        },

      },
      mounted(){
        // this.getBreak()
        this.totalSeconds = parseInt(localStorage.getItem('runningTime') ?? 0);
        this.logStatus = localStorage.getItem('logStatus')
        $('#btnLogCheckOut').hide();
        if(this.totalSeconds > 0) {
          this.timerVar = setInterval(this.countTimer, 1000);
          window.$('#btnLogCheckOut').show();
          window.$('#btnLogCheckIn').hide();
        }

        $(".breakName").click(function(){
         alert("dwwdwsss");
        });
      }
    })
    
     
     
    //METHOD

    

    // function countTimer() {
    //        ++totalSeconds;
    //        var hour = Math.floor(totalSeconds /3600);
    //        var minute = Math.floor((totalSeconds - hour*3600)/60);
    //        var seconds = totalSeconds - (hour*3600 + minute*60);
    //        if(hour < 10)
    //          hour = "0"+hour;
    //        if(minute < 10)
    //          minute = "0"+minute;
    //        if(seconds < 10)
    //          seconds = "0"+seconds;
    //          localStorage.setItem("runningTime", totalSeconds);
    //        document.getElementById("timer").innerHTML = hour + ":" + minute + ":" + seconds;
    //     }

    // $("#btnLogCheckIn").click(function(){
    //   timerVar = setInterval(countTimer, 1000);
    //   totalSeconds = parseInt(localStorage.getItem('runningTime') ?? 0);
    //   localStorage.setItem("logStatus", 'Check-out');
    //   $('#btnLogCheckOut').show();
    //   $('#btnLogCheckIn').hide();
    // });

    // $("#btnLogCheckOut").click(function(){
    //   localStorage.setItem("logStatus", 'Check-in');
    //   $('#btnLogCheckOut').hide();
    //   $('#btnLogCheckIn').show();
    // });


    // //MOUNTED
    // var timerVar = null;
    // var totalSeconds = parseInt(localStorage.getItem('runningTime') ?? 0);
    // $('#logStatus').html(localStorage.getItem('logStatus') ?? 'Check-in');
    // $('#btnLogCheckOut').hide();
    // getBreak();
    // if(totalSeconds > 0) {
    //   timerVar = setInterval(countTimer, 1000);
    //   $('#btnLogCheckOut').show();
    //   $('#btnLogCheckIn').hide();
    // }
    
  </script>
</body>

</html>
